---
title: Handwriting Structs
---

import { Callout } from ':ui';

# Handwriting Structs

While it's usually best to just allow structs to be transformed, there are times
when you may wish to customize the behavior of your structs beyond what's
capable with the provided struct API. In these cases, you'll need to handwrite
your structs in order to get the full possible power out of them.

## `static alignment`

Alignment specifies what addresses a value can be stored at; values of alignment
`n` must only be stored at addresses that are a multiple of `n`. It is always a
power of `2`, and the minimum value is `1` - currently, the accepted values are
`1 | 2 | 4 | 8`. Typically the alignment is equal to the size of the largest
primitive in a struct.

## `static size`

Size is the number of bytes needed to store the struct. Size is **always** a
multiple of alignment; the minimum permitted value is `0`.

## `__$$b`

This is a private field used to indicate the current byte offset of the instance
of the struct. It is initialized to `0` and is typically managed by Thyseus
itself; for example, when iterating over a query, the byte offset of an instance
will be bumped by the size of the struct every iteration.

## `serialize()`/`deserialize()`

These methods are responsible for reading or writing the values of the struct
instance into memory. They receive no arguments and should not return anything.

<Callout type="warn">
	`serialize()` must not assume that `deserialize()` has been called. Structs
	may call `deserialize()` and `serialize()` in any order, or not at all.
</Callout>

## `static copy()`/`static drop()`

These optional static methods must be defined when your struct has additional
work to be done in order to safely copy or drop an instance. In general, this is
only the case when your struct containers pointers.
